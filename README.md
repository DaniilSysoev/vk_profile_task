# Документация по установке приложения к профильному заданию
## Содержание
* [Структура проекта](#структура)
* [Установка и запуск проекта](#установка-и-запуск)
* [Спецификация приложения](#спецификация)
* [Описание моделей](#описание)
* [Админ панель](#админпанель)
## <a name="структура">Структура проекта</a>
Внутри корневой папки находятся:  
* Папка friends - проект Django
* Папка tests и файл tests.yml - unit-тесты
* Файл .gitignore
* Dockerfile и docker-compose.yml для контейнеризации
* README.md файл
* Файл зависимостей requirements.txt
* OpenAPI спецификация swagger.json  

Внутри папки firends находятся все необходимые файлы для работы приложения.  
Она включает в себя папку проекта friends, папку спецификации swagger и папку приложения api.

## <a name="установка-и-запуск">Установка и запуск проекта</a>
### Установка
Для начала установки необходимо создать директорию на вашей локальной машине и склонировать туда репозиторий, используя консоль.
```bash
git clone https://github.com/DaniilSysoev/vk_profile_task
```
Далее открыть директорию любым удобным способом(я использовую Visual Studio Code и Git Bash).
### Запуск контейнера
Находясь в корневой папке проекта вам необходимо выполнить следующую команду:
```bash
docker-compose up
```
После чего контейнер запустится и нужно будет открыть второй терминал.  
Теперь нужно подключиться к консоли контейнера и провести миграции.
```bash
docker ps
```
Находим CONTAINER_ID и вставляем его в следующую команду
```bash
docker exec -it CONTAINER_ID bash
```
Теперь вы находитесь в корневой папке проекта внутри контейнера.  
Далее вы переходите в папку friends
```bash
cd friends
```
и проводите миграции.
```bash
python manage.py makemigrations
python manage.py migrate
```
Для выхода из консоли контейнера используем команду *exit*.  

Теперь наш проект запущен на localhost:8000, куда вы можете перейти из браузера или отправлять запросы из приложений по типу Postman. Я пользуюсь как раз таки им.
## <a name="спецификация">Спецификация приложения</a>
В проекте присутствует как интерактивная спецификация, доступная по пути /docs/swagger/, так и json файл с описанием спецификации, который можно использовать для создания спецификации на сайте editor.swagger.io.
### Краткая спецификация
По пути /api/v1/users/ выдается список всех зарегистрированных пользователей.  
Так же здесь вы можете зарегистрироваться, залогиниться, отправить заявку в друзья конкретному пользователю и посмотреть информацию о статусе дружбы с конкретным пользователем.  

По пути /api/v1/requests/ вы можете посмотреть входящие и исходящие заявки, отправить и принять\отклонить заявку в друзья.  

По пути /api/v1/friends/ вы получите список имен ваших друзей и можете удалить друга.  
___
*Подробные тесты и примеры запуска можно найти в папке tests репозитория.*
## <a name="описание">Описание моделей</a>
В приложении используется стандартная модель юзеров и токенов drf и две определенные модели.  

В модели User используется всего два поля: username и password для регистрации и авторизации.  

Модель FriendsList содержит информацию о дружеских связях пользователя. Модель хранит поле user, которое является внешним ключом к модели User и поле friends, которое является manytomany к модели User.  

Модель Requests содержит информацию о заявках в друзья, отправленных пользователями. Модель хранит поле sender_id и receiver_id, являющиеся внешними ключами к модели User.
## <a name="админпанель">Админ панель</a>
Для того, чтобы зайти в панель администратора, нам необходимо создать суперюзера. Для этого выполним вход в консоль контейнера, как мы это делали в пункте запуск контейнера и выполним следующую команду возле файла manage.py:
```
python manage.py createsuperuser
```
После чего необходимо будет ввести логин, почту(необязательно), пароль и подтвердить пароль для создания суперюзера.  
Далее просто переходим по пути /admin/ и логинимся как администратор.
